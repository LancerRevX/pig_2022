import{d as c,u as p,m as h,n as m,_,r as D,o,c as s,t as r,a as t,w as g,v as k,h as a,F as y,l as f,f as C,g as v}from"./index.af4eaa39.js";import{_ as w,a as E}from"./placeholder_female.f3a773be.js";const F=c({data:()=>({doctor:void 0,id:0,appointmentDateStr:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,-1),userStore:p()}),computed:{user(){return this.userStore.user}},methods:{async makeAppointment(){if(!this.appointmentDateStr){alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0435\u043B\u0430\u0435\u043C\u0443\u044E \u0434\u0430\u0442\u0443 \u0437\u0430\u043F\u0438\u0441\u0438!");return}let u=new Date(this.appointmentDateStr);if(this.doctor){let e=await h(this.doctor,u);alert(e?"\u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u043F\u0438\u0441\u0430\u043B\u0438\u0441\u044C \u043A \u0432\u0440\u0430\u0447\u0443!":"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F!")}},async getDoctor(){this.id=Number(this.$route.params.id),this.doctor=await m(this.id,!0)},years_to_str(u){let e,n=u%100;return n>=5&&n<=20?e="\u043B\u0435\u0442":(n=n%10,n==1?e="\u0433\u043E\u0434":n>=2&&n<=4?e="\u0433\u043E\u0434\u0430":e="\u043B\u0435\u0442"),u+" "+e}},created(){this.getDoctor(),this.$watch(()=>this.$route.params,()=>{console.log("watcher"),this.getDoctor()})}});const S={class:"single-doctor-block"},B={key:0},b={key:1},$={key:2,class:"doctor-block"},A=["src"],V={key:1,height:"500",src:w},L={key:2,height:"500",src:E},N=t("br",null,null,-1),I=t("h3",null,"\u0421\u0442\u0430\u0436",-1),O=t("br",null,null,-1),R=t("h3",null,"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u043F\u0440\u0438\u0451\u043C\u0430",-1),T=t("br",null,null,-1),z={key:0,class:"make-appointment-box"},M=t("br",null,null,-1),U=t("br",null,null,-1),j={key:1},q=t("h3",null,"\u0412\u0440\u0430\u0447\u0438 \u0441 \u0442\u043E\u0439 \u0436\u0435 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E",-1);function G(u,e,n,H,J,K){var l;const d=D("RouterLink");return o(),s("div",S,[u.doctor===void 0?(o(),s("p",B,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...")):u.doctor===null?(o(),s("p",b,"\u0414\u043E\u043A\u0442\u043E\u0440 \u0441 ID = "+r(u.id)+" \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D",1)):(o(),s("div",$,[t("h2",null,r(u.doctor.name),1),u.doctor.photo?(o(),s("img",{key:0,src:u.doctor.photo},null,8,A)):u.doctor.gender==1?(o(),s("img",V)):(o(),s("img",L)),t("div",null,[t("h3",null,r(u.doctor.speciality.name),1),t("p",null,r(u.doctor.speciality.description),1),N,I,t("p",null,r(u.years_to_str(u.doctor.work_record)),1),O,R,t("p",null,r(u.doctor.cost)+" \u0440\u0443\u0431.",1),T,(l=u.user)!=null&&l.patient?(o(),s("div",z,[g(t("input",{type:"datetime-local","onUpdate:modelValue":e[0]||(e[0]=i=>u.appointmentDateStr=i)},null,512),[[k,u.appointmentDateStr]]),t("button",{onClick:e[1]||(e[1]=i=>u.makeAppointment())},"\u0417\u0430\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u043F\u0440\u0438\u0451\u043C")])):a("",!0),M,U,u.doctor.speciality.doctors.length?(o(),s("div",j,[q,(o(!0),s(y,null,f(u.doctor.speciality.doctors,i=>(o(),C(d,{key:i.id,to:"/doctors/"+i.id},{default:v(()=>[t("p",null,r(i.name),1)]),_:2},1032,["to"]))),128))])):a("",!0)])]))])}const W=_(F,[["render",G]]);export{W as default};
