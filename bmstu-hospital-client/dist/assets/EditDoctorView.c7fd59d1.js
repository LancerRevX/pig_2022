import{d as m,u as D,j as h,n as y,x as g,H as v,I as f,_ as S,r as E,o as i,c as r,f as C,w as s,v as n,a as e,k as w,F,l as b,G as l,b as p,t as k,p as B,e as V}from"./index.af4eaa39.js";import{D as d,L as $}from"./LoadingIndicator.82b4d7a6.js";const I=m({data:()=>({doctor:null,specialities:[],appointmentDateStr:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,-1),userStore:D(),dataStatus:d.Loading}),computed:{user(){return this.userStore.user},id(){return this.$route.params.id?Number(this.$route.params.id):null}},methods:{async getSpecialities(){this.specialities=await h(!1)},async getDoctor(){if(this.id)try{this.doctor=await y(this.id,!0),this.doctor&&(this.doctor.speciality=this.specialities.find(t=>{var u;return t.id==((u=this.doctor)==null?void 0:u.speciality.id)})),this.dataStatus=d.Ready}catch(t){this.doctor=null,t instanceof g?this.dataStatus=d.Forbidden:this.dataStatus=d.Error}else this.doctor=null,this.dataStatus=d.NotFound},async saveDoctor(){if(this.doctor)try{await v(this.doctor),alert("\u0414\u0430\u043D\u043D\u044B\u0435 \u0432\u0440\u0430\u0447\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u044B")}catch(t){console.log(t),alert("\u041E\u0448\u0438\u0431\u043A\u0430!")}},async deleteDoctor(){if(this.doctor)try{await f(this.doctor),alert("\u0412\u0440\u0430\u0447 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0451\u043D."),this.$router.push("/")}catch(t){console.log(t),alert("\u041E\u0448\u0438\u0431\u043A\u0430!")}}},created(){this.getSpecialities(),this.getDoctor(),this.$watch(()=>this.$route.params,()=>{console.log("watcher"),this.getDoctor()})},components:{LoadingIndicator:$}});const a=t=>(B("data-v-d79d2dda"),t=t(),V(),t),N={class:"edit-doctor-block"},U=a(()=>e("h1",null," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0432\u0440\u0430\u0447\u0430 ",-1)),L={key:1,class:"doctor-block"},_=a(()=>e("span",null,"\u0418\u043C\u044F",-1)),A=a(()=>e("span",null,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",-1)),M=a(()=>e("span",null,"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E",-1)),T=a(()=>e("span",null,"\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C",-1)),O=["value"],R=a(()=>e("span",null,"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u043F\u0440\u0438\u0451\u043C\u0430",-1)),j=a(()=>e("span",null,"\u041F\u043E\u043B",-1));function z(t,u,G,H,q,J){const c=E("LoadingIndicator");return i(),r("div",N,[U,t.doctor?(i(),r("div",L,[_,s(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=o=>t.doctor.firstName=o)},null,512),[[n,t.doctor.firstName]]),A,s(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=o=>t.doctor.lastName=o)},null,512),[[n,t.doctor.lastName]]),M,s(e("input",{type:"text","onUpdate:modelValue":u[2]||(u[2]=o=>t.doctor.patronymic=o)},null,512),[[n,t.doctor.patronymic]]),T,s(e("select",{"onUpdate:modelValue":u[3]||(u[3]=o=>t.doctor.speciality=o)},[(i(!0),r(F,null,b(t.specialities,o=>(i(),r("option",{key:o.id,value:o},k(o.name),9,O))),128))],512),[[w,t.doctor.speciality]]),R,s(e("input",{type:"number","onUpdate:modelValue":u[4]||(u[4]=o=>t.doctor.cost=o)},null,512),[[n,t.doctor.cost]]),j,e("div",null,[e("label",null,[l(" \u041C\u0443\u0436\u0447\u0438\u043D\u0430 "),s(e("input",{type:"radio","onUpdate:modelValue":u[5]||(u[5]=o=>t.doctor.gender=o),value:1},null,512),[[p,t.doctor.gender]])]),e("label",null,[l(" \u0416\u0435\u043D\u0449\u0438\u043D\u0430 "),s(e("input",{type:"radio","onUpdate:modelValue":u[6]||(u[6]=o=>t.doctor.gender=o),value:0},null,512),[[p,t.doctor.gender]])])]),e("input",{type:"submit",value:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:u[7]||(u[7]=o=>t.saveDoctor())}),e("input",{type:"button",value:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",onClick:u[8]||(u[8]=o=>t.deleteDoctor())})])):(i(),C(c,{key:0,"data-status":t.dataStatus},null,8,["data-status"]))])}const Q=S(I,[["render",z],["__scopeId","data-v-d79d2dda"]]);export{Q as default};
