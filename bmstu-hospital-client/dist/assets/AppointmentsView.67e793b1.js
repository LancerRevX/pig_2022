import{D as c,L as D}from"./LoadingIndicator.82b4d7a6.js";import{d as F,u as y,M as w,q as A,i as B,C as k,D as C,_ as V,r as f,o,c as n,f as S,a,w as d,k as m,F as r,l as p,v as g,t as i,N as E,E as I,g as $,p as b,e as U,G as L}from"./index.af4eaa39.js";const N=F({data:()=>({appointments:[],patients:[],doctors:[],userStore:y(),DataStatus:c,appointmentFilter:{patient:void 0,doctor:void 0,status:void 0,datetimeAfter:void 0,datetimeBefore:void 0},datetimeAfterStr:"",datetimeBeforeStr:"",appointmentStatuses:[]}),methods:{async changeAppointment(t){await w(t)},async getData(){this.patients=await A(),this.doctors=await B(),this.appointmentStatuses=await k(),this.appointments=await C(this.appointmentFilter);for(let t of this.appointments)t.status=this.appointmentStatuses.find(u=>u.value==t.status.value)},isFuture(t){return t.datetime>new Date},async updateDatetimeFilter(){this.appointmentFilter.datetimeAfter=this.datetimeAfterStr?new Date(this.datetimeAfterStr):void 0,this.appointmentFilter.datetimeBefore=this.datetimeBeforeStr?new Date(this.datetimeBeforeStr):void 0,await this.getData()}},watch:{"userStore.user"(){this.getData()},datetimeAfterStr(){this.updateDatetimeFilter()},datetimeBeforeStr(){this.updateDatetimeFilter()}},components:{LoadingIndicator:D},created(){this.getData()}});const s=t=>(b("data-v-7949aa17"),t=t(),U(),t),M=s(()=>a("h2",null,"\u0422\u0430\u0431\u043B\u0438\u0446\u0430 \u0437\u0430\u043F\u0438\u0441\u0435\u0439 \u043A \u0432\u0440\u0430\u0447\u0430\u043C",-1)),T={key:1,class:"appointments-box"},q={class:"filter-box"},z=s(()=>a("span",null,"\u041F\u0430\u0446\u0438\u0435\u043D\u0442",-1)),G=s(()=>a("option",{value:void 0},"\u041B\u044E\u0431\u043E\u0439",-1)),P=["value"],R=s(()=>a("span",null,"\u0412\u0440\u0430\u0447",-1)),j=s(()=>a("option",{value:void 0},"\u041B\u044E\u0431\u043E\u0439",-1)),H=["value"],J=s(()=>a("span",null,"\u0421\u0442\u0430\u0442\u0443\u0441",-1)),K=s(()=>a("option",{value:void 0},"\u041B\u044E\u0431\u043E\u0439",-1)),O=["value"],Q=s(()=>a("span",null,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",-1)),W={class:"datetime-filter-box"},X=s(()=>a("span",null,"\u0421",-1)),Y=s(()=>a("span",null,"\u0434\u043E",-1)),Z={key:1,class:"appointments-table"},x=s(()=>a("thead",null,[a("tr",null,[a("th",null,"ID"),a("th",null,"\u041F\u0430\u0446\u0438\u0435\u043D\u0442"),a("th",null,"\u0412\u0440\u0430\u0447"),a("th",null,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F"),a("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441")])],-1)),tt=["onChange","onUpdate:modelValue"],et=["value"];function at(t,u,ut,ot,nt,st){var v;const h=f("LoadingIndicator"),_=f("router-link");return o(),n("div",null,[M,(v=t.userStore.user)!=null&&v.manager?(o(),n("div",T,[a("div",q,[z,d(a("select",{"onUpdate:modelValue":u[0]||(u[0]=e=>t.appointmentFilter.patient=e),onChange:u[1]||(u[1]=e=>t.getData())},[G,(o(!0),n(r,null,p(t.patients,e=>(o(),n("option",{key:e.id,value:e},i(e.name),9,P))),128))],544),[[m,t.appointmentFilter.patient]]),R,d(a("select",{"onUpdate:modelValue":u[2]||(u[2]=e=>t.appointmentFilter.doctor=e),onChange:u[3]||(u[3]=e=>t.getData())},[j,(o(!0),n(r,null,p(t.doctors,e=>(o(),n("option",{key:e.id,value:e},i(e.name),9,H))),128))],544),[[m,t.appointmentFilter.doctor]]),J,d(a("select",{"onUpdate:modelValue":u[4]||(u[4]=e=>t.appointmentFilter.status=e),onChange:u[5]||(u[5]=e=>t.getData())},[K,(o(!0),n(r,null,p(t.appointmentStatuses,e=>(o(),n("option",{key:e.value,value:e},i(e.name),9,O))),128))],544),[[m,t.appointmentFilter.status]]),Q,a("div",W,[X,d(a("input",{type:"datetime-local","onUpdate:modelValue":u[6]||(u[6]=e=>t.datetimeAfterStr=e)},null,512),[[g,t.datetimeAfterStr]]),Y,d(a("input",{type:"datetime-local","onUpdate:modelValue":u[7]||(u[7]=e=>t.datetimeBeforeStr=e)},null,512),[[g,t.datetimeBeforeStr]])])]),t.appointments.length?(o(),n("table",Z,[x,a("tbody",null,[(o(!0),n(r,null,p(t.appointments,e=>(o(),n("tr",{key:e.id,class:E(t.isFuture(e)?"future":"past")},[a("td",null,i(e.id),1),a("td",null,i(e.patient.name),1),a("td",null,[I(_,{to:"/doctors/"+e.doctor.id},{default:$(()=>[L(i(e.doctor.name),1)]),_:2},1032,["to"])]),a("td",null,i(e.datetime.toLocaleString()),1),a("td",null,[d(a("select",{onChange:l=>t.changeAppointment(e),"onUpdate:modelValue":l=>e.status=l},[(o(!0),n(r,null,p(t.appointmentStatuses,l=>(o(),n("option",{key:l.value,value:l},i(l.name),9,et))),128))],40,tt),[[m,e.status]])])],2))),128))])])):(o(),S(h,{key:0,"data-status":t.DataStatus.Ready,"data-array":[]},null,8,["data-status"]))])):(o(),S(h,{key:0,"data-status":t.DataStatus.Forbidden},null,8,["data-status"]))])}const dt=V(N,[["render",at],["__scopeId","data-v-7949aa17"]]);export{dt as default};
