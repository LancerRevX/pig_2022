import{d,_ as h,r as _,o as s,a as i,t as r,b as u,F as p,e as m,f as y,c as f,w as g}from"./index.eb74ec1e.js";import{_ as k,a as w}from"./placeholder_female.f3a773be.js";const D=d({data:()=>({doctor:void 0,id:void 0}),methods:{async getDoctor(){try{this.id=this.$route.params.id;let o=await fetch("http://127.0.0.1:8000/api/doctors/"+this.id,{method:"GET"});if(o.status==404)this.doctor=null;else{let t=await o.json();console.log(t),o=await fetch(t.speciality),t.speciality=await o.json();let e=[];for(let l of t.speciality.doctors){o=await fetch(l);let c=await o.json();c.id!=t.id&&e.push(c)}t.speciality.doctors=e,this.doctor=t}}catch(o){console.log("Get doctors error:",o)}},years_to_str(o){let t,e=o%100;return e>=5&&e<=20?t="\u043B\u0435\u0442":(e=e%10,e==1?t="\u0433\u043E\u0434":e>=2&&e<=4?t="\u0433\u043E\u0434\u0430":t="\u043B\u0435\u0442"),o+" "+t}},created(){this.getDoctor(),this.$watch(()=>this.$route.params,()=>{console.log("watcher"),this.getDoctor()})}});const v={class:"single-doctor-block"},E={key:0},B={key:1},$={key:2,class:"doctor-block"},C=["src"],b={key:1,height:"500",src:k},j={key:2,height:"500",src:w},V=u("br",null,null,-1),F=u("h3",null,"\u0421\u0442\u0430\u0436",-1),L=u("br",null,null,-1),S={key:0},A=u("h3",null,"\u0412\u0440\u0430\u0447\u0438 \u0441 \u0442\u043E\u0439 \u0436\u0435 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E",-1);function G(o,t,e,l,c,N){const a=_("RouterLink");return s(),i("div",v,[o.doctor===void 0?(s(),i("p",E,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...")):o.doctor===null?(s(),i("p",B,"\u0414\u043E\u043A\u0442\u043E\u0440 \u0441 ID = "+r(o.id)+" \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D",1)):(s(),i("div",$,[u("h2",null,r([o.doctor.last_name,o.doctor.first_name,o.doctor.patronymic].join(" ")),1),o.doctor.photo?(s(),i("img",{key:0,src:o.doctor.photo},null,8,C)):o.doctor.gender==1?(s(),i("img",b)):(s(),i("img",j)),u("div",null,[u("h3",null,r(o.doctor.speciality.name),1),u("p",null,r(o.doctor.speciality.description),1),V,F,u("p",null,r(o.years_to_str(o.doctor.work_record)),1),L,o.doctor.speciality.doctors.length?(s(),i("div",S,[A,(s(!0),i(p,null,m(o.doctor.speciality.doctors,n=>(s(),f(a,{key:n.id,to:"/doctors/"+n.id},{default:g(()=>[u("p",null,r([n.last_name,n.first_name,n.patronymic].join(" ")),1)]),_:2},1032,["to"]))),128))])):y("",!0)])]))])}const T=h(D,[["render",G]]);export{T as default};
